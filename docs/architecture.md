# 전체 아키텍처 개요

이 문서는 포토 키오스크 앱의 계층 구성을 **렌더러(React) 중심**으로 설명합니다. 실제 빌드/실행 스크립트나 하드웨어 제어 코드는 포함하지 않으며, 구조와 책임 분리를 드러내는 것을 목표로 합니다.

## 계층 구조
- **Renderer (React)**: 사용자 인터페이스, 세션 상태 관리, IPC 요청 발신. 하드웨어 의존성은 존재하지 않으며, 오직 계약화된 IPC 메시지만 사용합니다.
- **Preload**: 안전한 브리지 계층. 허용된 IPC 채널만 노출하고, 렌더러에 타입 친화적 헬퍼를 제공합니다.
- **Main**: 윈도우 수명 관리, 앱 환경 설정, 하드웨어 추상화 모듈을 로드하는 위치. 실제 하드웨어 연동은 제외하고 인터페이스 수준으로만 표현합니다.

## 설계 원칙
1. **계약 우선**: IPC 메시지와 페이로드는 명시적 타입/주석으로 고정합니다.
2. **상태 기반 플로우**: 촬영 준비 → 안내 → 촬영 → 검수 → 배포의 단계가 명시된 상태 머신을 기준으로 UI를 설계합니다.
3. **복원 가능성**: 세션 타임아웃, 하드웨어 미응답 등의 예외 상황을 렌더러 상태에서 감지하고, 재시도/초기화 경로를 제공합니다.
4. **비침투적 추상화**: 하드웨어 의존 코드는 인터페이스(예: `CameraController`) 또는 주석으로만 표현하며, 실제 구현/프로토콜을 포함하지 않습니다.

## 데이터 흐름
- **Renderer → Main**: `session:start`, `capture:request`, `asset:save` 등 선언된 채널로 요청을 전송합니다.
- **Main → Renderer**: `session:update`, `capture:result`, `hardware:status` 등의 이벤트로 UI 상태를 동기화합니다.
- **Preload 역할**: 채널 스펙을 단일 위치에서 정의하고, 렌더러에서 사용할 가드 함수(예: `invokeCapture`)를 제공합니다.

## 폴더 구조 제안
```
docs/
  architecture.md
  flow.md
  ipc.md
  decisions/
    000-template.md
examples/
  renderer-session.tsx
```

각 문서는 실제 코드를 대체할 수 있는 참조 자료로서, 실행 가능한 애플리케이션을 만들지 않고도 구조를 이해하도록 돕습니다.
